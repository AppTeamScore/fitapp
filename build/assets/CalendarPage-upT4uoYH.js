import{c as j,r as u,j as e,B as i,C as m,a as h,e as J,f as Y}from"./index-DOHKno-r.js";import{B as _}from"./badge-BNnFtFEq.js";import{P as k}from"./plus-C9cSmwEu.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],F=j("chevron-left",z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P=j("chevron-right",H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],b=j("circle-check",B);function A({onNavigate:w}){const[l,S]=u.useState(new Date),[x,p]=u.useState({});u.useEffect(()=>{D()},[]);const D=()=>{const t=JSON.parse(localStorage.getItem("completedWorkouts")||"[]"),a=JSON.parse(localStorage.getItem("plannedWorkouts")||"[]"),s={};t.forEach(n=>{const o=n.date.split("T")[0];s[o]={type:n.type||"Тренировка",completed:!0}}),a.forEach(n=>{const o=n.date.split("T")[0];s[o]||(s[o]={type:n.type||"Тренировка",completed:!1})});const r=new Date,c=r.getMonth(),d=r.getFullYear();[{day:1,type:"Кардио",completed:!0},{day:3,type:"Силовая",completed:!0},{day:5,type:"HIIT",completed:!1},{day:8,type:"Йога",completed:!0},{day:10,type:"Кардио",completed:!0},{day:12,type:"Силовая",completed:!1},{day:15,type:"HIIT",completed:!0}].forEach(({day:n,type:o,completed:E})=>{const v=`${d}-${(c+1).toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`;s[v]||(s[v]={type:o,completed:E})}),p(s)},W=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],C=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],I=t=>{const a=t.getFullYear(),s=t.getMonth(),r=new Date(a,s,1),d=new Date(a,s+1,0).getDate(),f=(r.getDay()+6)%7,n=[];for(let o=0;o<f;o++)n.push(null);for(let o=1;o<=d;o++)n.push(o);return n},y=t=>{S(a=>{const s=new Date(a);return t==="prev"?s.setMonth(a.getMonth()-1):s.setMonth(a.getMonth()+1),s})},g=t=>{const a=l.getFullYear(),s=l.getMonth();return`${a}-${(s+1).toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`},M=t=>{switch(t){case"Кардио":return"bg-blue-100 text-blue-800";case"Силовая":return"bg-red-100 text-red-800";case"HIIT":return"bg-orange-100 text-orange-800";case"Йога":return"bg-green-100 text-green-800";case"Тренировка":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=t=>{const a=g(t),s={date:a,type:"Тренировка",completed:!1},r=JSON.parse(localStorage.getItem("plannedWorkouts")||"[]");r.push(s),localStorage.setItem("plannedWorkouts",JSON.stringify(r)),p(c=>({...c,[a]:{type:"Тренировка",completed:!1}}))},$=t=>{const a=g(t),s=x[a];if(s&&!s.completed){const r=JSON.parse(localStorage.getItem("completedWorkouts")||"[]");r.push({date:new Date(a).toISOString(),type:s.type,duration:45}),localStorage.setItem("completedWorkouts",JSON.stringify(r)),p(c=>({...c,[a]:{...s,completed:!0}}))}},T=I(l),N=Object.values(x).filter(t=>t.completed).length,K=Object.keys(x).length;return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Календарь"}),e.jsx(i,{onClick:()=>w("home"),variant:"ghost",children:"Назад"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Завершено"})]})}),e.jsx(m,{children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:K-N}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Запланировано"})]})})]}),e.jsxs(m,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>y("prev"),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs(Y,{children:[W[l.getMonth()]," ",l.getFullYear()]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>y("next"),children:e.jsx(P,{className:"h-4 w-4"})})]})}),e.jsxs(h,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:C.map(t=>e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground p-2",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T.map((t,a)=>{if(!t)return e.jsx("div",{className:"p-2"},a);const s=g(t),r=x[s],c=new Date().toDateString()===new Date(l.getFullYear(),l.getMonth(),t).toDateString();return e.jsx("div",{className:"relative",children:e.jsxs("div",{className:`
                    p-2 text-center text-sm rounded-lg min-h-[3rem] border cursor-pointer
                    ${c?"bg-primary text-primary-foreground":"hover:bg-muted"}
                  `,children:[e.jsx("div",{className:"font-medium",children:t}),r?e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsx(_,{className:`text-xs ${M(r.type)}`,children:r.type}),r.completed?e.jsx(b,{className:"h-3 w-3 text-green-600 mx-auto"}):e.jsx(i,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 text-xs",onClick:d=>{d.stopPropagation(),$(t)},children:"✓"})]}):e.jsx(i,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 mt-1 opacity-50 hover:opacity-100",onClick:d=>{d.stopPropagation(),O(t)},children:e.jsx(k,{className:"h-3 w-3"})})]})},t)})})]})]}),e.jsx(m,{children:e.jsxs(h,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Как использовать"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Нажмите + чтобы запланировать тренировку"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Нажмите ✓ чтобы отметить тренировку как завершенную"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 text-green-600 mr-2"}),"Завершенные тренировки"]})]})]})}),e.jsx(m,{children:e.jsxs(h,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Типы тренировок"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 mr-2"}),"Кардио"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500 mr-2"}),"Силовая"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500 mr-2"}),"HIIT"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500 mr-2"}),"Йога"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-500 mr-2"}),"Тренировка"]})]})]})})]})}export{A as CalendarPage};
